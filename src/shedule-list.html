<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<!--link rel="import" href="../bower_components/iron-fit-behavior/iron-fit-behavior.html"-->

<link rel="import" href="./shared-styles.html">

<dom-module id="class-main">
  <template>
    <style include="shared-styles"></style>
    <style>

    </style>

    <iron-ajax id="ajax"
      url="http://jsonplaceholder.typicode.com/posts" 
      last-response="{{shedules}}" 
      last-error="{{error}}" 
      loading="{{loading}}"><!-- userId id title body --></iron-ajax>

    <template is="dom-repeat" items="{{shedules}}" as="item" initial-count="20">
      <div list-item on-tap="_viewClass">[[item.title]]</div>
    </template>

  </template>
  <script>
    Polymer({
      is:'class-main',
      properties : {
        page : {
          type:String,
          notify:true
        },
        classId : {
          type : String,
          notify : true
        },
        shedules : {
          type: Array,
          notify:true,
          value : []
        },
        loading : {
          type: Boolean,
          notify: true,
          observer: '_load'
        },
        pageReady : {
          type: Boolean,
          notify:true
        }
      },
      _viewClass : function(e) {
        this.set('classId',e.model.item.id);
        this.set('page','shedule-detail');
      },
      _load : function() {
        this.set('pageReady',!this.loading);
      },
      ready : function() {
        this.set('pageReady', false);
        this.splice('shedules',0,this.shedules.length);
        this.$.ajax.generateRequest();
      }
    });
  </script>
</dom-module>
